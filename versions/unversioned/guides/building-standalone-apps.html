<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../../../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,600,300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="../../../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../../../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../../../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="../../../_static/img/apple-touch-icon-180x180.png"/>
  <link rel="icon" type="image/png" href="../../../_static/img/favicon-32x32.png" sizes="32x32"/>
  <meta name="msapplication-TileColor" content="#023c69"/>
  <meta name="msapplication-TileImage" content="../../../_static/img/mstile-144x144.png"/>
  <meta name="theme-color" content="#023c69"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />

  
    <title>创建 Standalone Apps &mdash; Exponent unversioned documentation</title>
    
    <link rel="stylesheet" href="../../../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     'unversioned',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Exponent unversioned documentation" href="../index.html" />
    <link rel="up" title="Guides" href="index.html" />
    <link rel="next" title="Exponent 是怎么工作的" href="how-exponent-works.html" />
    <link rel="prev" title="exp 命令行接口" href="exp-cli.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="how-exponent-works.html" title="Exponent 是怎么工作的"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="exp-cli.html" title="exp 命令行接口"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Exponent unversioned documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Guides</a> &raquo;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
        <a href="
    ../index.html" class="text-logo">Exponent</a>

<p id="version-indicator"> unversioned </p>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../../../search.html" method="GET" role="form">
        <div class="input-group">
          <input id="algolia-search-box" name="q" type="text" class="form-control" placeholder="Search...">
        </div>
      </form>
    </div>
  </div>
</div>
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
docsearch({
  appId: 'S6DBW4862L',
  apiKey: '59ebba04e5d2e4bed5d5ae12eed28bdd',
  indexName: 'exponent-docs',
  inputSelector: '#algolia-search-box',
  algoliaOptions: { facetFilters: [ "tags:unversioned" ], hitsPerPage: 5 }
});
</script>
        
<div class="sidebar-block">
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">介绍</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/installation.html">安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/xde-tour.html">XDE 浏览</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/community.html">Community</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/additional-resources.html">其他资源</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/faq.html">FAQ</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="development-mode.html">Development Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">exp.json 配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">查看日志</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="assets.html">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="preloading-and-caching-assets.html">预加载 &amp; 缓存 Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="icons.html">Icons</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing-and-navigation.html">路由 &amp; 导航</a></li>
<li class="toctree-l2"><a class="reference internal" href="push-notifications.html">推送通知</a></li>
<li class="toctree-l2"><a class="reference internal" href="exp-cli.html"><code class="docutils literal"><span class="pre">exp</span></code> 命令行接口</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">创建 Standalone Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-exponent-works.html">Exponent 是怎么工作的</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sdk/index.html">SDK API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sdk/amplitude.html">Amplitude</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/app-loading.html">AppLoading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/asset.html">Asset</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/bar-code-scanner.html">BarCodeScanner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/blur-view.html">BlurView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/constants.html">Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/contacts.html">Contacts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/facebook.html">Facebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/font.html">Font</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/gl-view.html">GLView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/google.html">Google</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/imagepicker.html">ImagePicker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/linear-gradient.html">LinearGradient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/location.html">Location</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/map-view.html">MapView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/permissions.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/segment.html">Segment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/svg.html">Svg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/util.html">Util</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk/video.html">Video</a></li>
</ul>
</li>
</ul>

    
  </div>
</div>
    </div>
  </div>
        <div id="right-column">
          <div class="document body">
            
  <div class="section" id="standalone-apps">
<span id="building-standalone-apps"></span><h1>创建 Standalone Apps<a class="headerlink" href="#standalone-apps" title="Permalink to this headline">¶</a></h1>
<p>不是所有人都想让他们的顾客或者朋友先下载 Exponent 然后再用他们的 app 的; 你希望把你的 app 发布到 App Store 或者 Play Store。我们称之为 &quot;shell apps&quot; 或者 &quot;standalone apps&quot;。这篇文章会详细说明怎么创建 iOS 和 Android standalone app。</p>
<p>创建 iOS standalone app 的话，你需要一个 Apple 开发账户。而创建 Android standalone app 的话，你不需要 Google Play 开发账户。如果你要发布到这两个平台任一的话，你当然需要对应的开发账号。</p>
<blockquote class="epigraph">
<div><strong>Warning:</strong> Standalone apps 还是 beta 阶段! 尽管 Android 部分已经在 <a class="reference external" href="https://li.st/">li.st</a> 上反复测试过，iOS 还有我们的自动化构建流程相对来说还比较新，可能你会遇到某些问题。如果遇到问题的话，一定要在 Slack 或者 Twitter 上告诉我们，然后我们会尽快修复，非常感谢!</div></blockquote>
<div class="section" id="exp">
<h2>1. 安装 exp<a class="headerlink" href="#exp" title="Permalink to this headline">¶</a></h2>
<p>XDE 暂时还不支持 build  standalone app, 我们需要 <code class="docutils literal"><span class="pre">exp</span></code>, 运行 <code class="docutils literal"><span class="pre">npm</span> <span class="pre">install</span> <span class="pre">-g</span> <span class="pre">exp</span></code> 来安装。</p>
<p>你之前没用过 <code class="docutils literal"><span class="pre">exp</span></code> 的话，你需要做的第一件事就是用你的 Exponent 账号登录: <code class="docutils literal"><span class="pre">exp</span> <span class="pre">login</span></code>.</p>
</div>
<div class="section" id="exp-json">
<h2>2. 配置 exp.json<a class="headerlink" href="#exp-json" title="Permalink to this headline">¶</a></h2>
<p>你应用的 <code class="docutils literal"><span class="pre">exp.json</span></code> 必须包含下面这些字段，对比下如果有缺失的话，就需要更改了。</p>
<blockquote>
<div><div class="highlight-javascript"><div class="highlight"><pre>{
  name: &quot;Playground&quot;,
  iconUrl: &quot;https://s3.amazonaws.com/exp-us-standard/rnplay/app-icon.png&quot;,
  version: &quot;2.0.0&quot;,
  slug: &quot;rnplay&quot;,
  sdkVersion: &quot;8.0.0&quot;,
  ios: {
    bundleIdentifier: &quot;org.rnplay.exp&quot;,
  },
  android: {
    package: &quot;org.rnplay.exp&quot;,
  }
}
</pre></div>
</div>
<p>iOS 的 <code class="docutils literal"><span class="pre">bundleIdentifier</span></code> 还有 Android 的 <code class="docutils literal"><span class="pre">package</span></code> 字段用的是 DNS 倒置标记，不需要是真正的域名。
在这里我用的是 <code class="docutils literal"><span class="pre">org.rnplay.exp</span></code>, 因为这个 app 的网站是 rnplay.org。你可以用比如: <code class="docutils literal"><span class="pre">com.yourcompany.appname</span></code>.</p>
<p>你可能知道为什么需要 <code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">iconUrl</span></code> 还有 <code class="docutils literal"><span class="pre">version</span></code>, 但是如果你不是很熟悉 Exponent 的话，
你可能不太清楚 <code class="docutils literal"><span class="pre">slug</span></code> 还有 <code class="docutils literal"><span class="pre">sdkVersion</span></code>. <code class="docutils literal"><span class="pre">slug</span></code> 是你 app 的 Javascript 的发布 url 名,
比如 <code class="docutils literal"><span class="pre">exp.host/&#64;notbrent/rnplay</span></code>, notbrent 是我的名字, <code class="docutils literal"><span class="pre">rnplay</span></code> 就是 slug。
<code class="docutils literal"><span class="pre">sdkVersion</span></code> 告诉 Exponent 用哪个运行时版本，对应的是某个 React Native 版本。</p>
</div></blockquote>
<p><code class="docutils literal"><span class="pre">exp.json</span></code> 还有一些其他你可能需要的属性。我们只介绍了一些必须的。完整文档可以查看:
<a class="reference internal" href="configuration.html#exp"><span class="std std-ref">Configuration with exp.json</span></a></p>
</div>
<div class="section" id="build">
<h2>3. 开始 build<a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>在 app 目录运行 <code class="docutils literal"><span class="pre">exp</span> <span class="pre">start</span></code> 来启动 Exponent packager。
这一步是必须的，因为为了确保是最新的版本，在 build 过程里边你的 app 必须 republish。</li>
<li>App 启动以后，运行 <code class="docutils literal"><span class="pre">exp</span> <span class="pre">build:android</span></code> 或者 <code class="docutils literal"><span class="pre">exp</span> <span class="pre">build:ios</span></code>.</li>
</ul>
<div class="section" id="build-android">
<h3>如果 build  Android 的话<a class="headerlink" href="#build-android" title="Permalink to this headline">¶</a></h3>
<p>第一次 build 的时候你需要选择是自己上传一个 keystore 还是让我们来替你做这块儿。如果你不知道 keystore 是什么的话，就交给我们吧。或者你也可以上传你自己的 keystore。
.. code-block:: none</p>
<blockquote>
<div><p>[exp] No currently active or previous builds for this project.</p>
<p>Would you like to upload a keystore or have us generate one for you?
If you don't know what this means, let us handle it! :)</p>
<blockquote>
<div><ol class="arabic simple">
<li>Let Exponent handle the process!</li>
<li>I want to upload my own keystore!</li>
</ol>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="if-you-choose-to-build-for-ios">
<h3>If you choose to build for iOS<a class="headerlink" href="#if-you-choose-to-build-for-ios" title="Permalink to this headline">¶</a></h3>
<p>第一次 build 的时候你需要输入你开发账号的 Apple ID, 密码 还有 你的 Apple Team ID。
我们需要这些信息来管理证书，还有管理 provisioning profiles, 然后我们可以 build 或者推送通知。</p>
<div class="highlight-none"><div class="highlight"><pre>[exp] No currently active or previous builds for this project.

We need your Apple ID/password to manage certificates and provisioning
profiles from your Apple Developer account.

What&#39;s your Apple ID? example@gmail.com
Password? ******************
What is your Apple Team ID (you can find that on this page:
https://developer.apple.com/account/#/membership)? XY1234567
</pre></div>
</div>
<blockquote class="epigraph">
<div><strong>Note:</strong> 我们暂时不支持 Apple 的双重认证。所以为了用 exp build, 你暂时需要关闭 2FA。我们在 Github 上创建了一个 2FA 支持的 issue: <a class="reference external" href="https://github.com/exponentjs/exp/issues/17">#17</a>.</div></blockquote>
<p>下一步你需要回答是否需要我们来管理你的发布证书。和 Android keystore 一样，如果你不知道
发布证书是什么的话，就交给我们负责。</p>
</div>
</div>
<div class="section" id="building">
<h2>4. 等待 building 完成<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h2>
<p>通常需要几分钟，你可以运行 <code class="docutils literal"><span class="pre">exp</span> <span class="pre">build:status</span></code> 查看状态。当完成的时候，你会看到一个 <code class="docutils literal"><span class="pre">.apk</span></code> (Android)
或者 <code class="docutils literal"><span class="pre">.ipa</span></code> (iOS) 文件的链接。复制粘贴到你的浏览器位置栏去下载 -- <code class="docutils literal"><span class="pre">curl</span></code> 或者 <code class="docutils literal"><span class="pre">wget</span></code> 会失败，除非你
刚好知道怎么从 S3 下载 gzipped 文件。我们会修复掉这个问题。</p>
<blockquote class="epigraph">
<div><strong>Note:</strong> iOS 我们会激活 bitcode, 所以生成的 <code class="docutils literal"><span class="pre">.ipa</span></code> 会比最终 App Store 上的大很多。 想了解更多的话, 可以看 <a class="reference external" href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html">App Thinning</a>.</div></blockquote>
</div>
<div class="section" id="id2">
<h2>5. 在设备或者虚拟机上测试<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>你可以拖拽 <code class="docutils literal"><span class="pre">.apk</span></code> 到你的 Android 虚拟机。
这是测试 build 是否成功最简单的办法, 但是通常你还是要在设备上测试。</li>
<li><strong>在 Android 设备上测试</strong>, 确保你安装了 Android platform tools 还有 <code class="docutils literal"><span class="pre">adb</span></code>, 然后连接你的设备，运行
<code class="docutils literal"><span class="pre">adb</span> <span class="pre">install</span> <span class="pre">app-filename.apk</span></code>.</li>
<li><strong>在 iOS 设备上测试</strong>, 你需要多做一些 :( 我们在朝更简单的生成模拟器 builds 方向努力。但是目前你需要用 Apple TestFlight。在 iTunes connect 创建一个新的 app, 选择你的 bundle identifier。然后上传你的 build, 添加测试人员, 推荐用 <a class="reference external" href="https://github.com/fastlane/fastlane/tree/master/pilot">pilot</a></li>
</ul>
</div>
<div class="section" id="id3">
<h2>6. 提交到对应商店<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>我们目前还没自动化这一步, 暂时你仍然需要按照 Apple 和 Google 的文档来提交你的 standalone binary 到对应商店。</p>
<blockquote class="epigraph">
<div><strong>Note:</strong> 在提交 iTunes Store 时，你会被问是否使用 advertising identifier (IDFA)。因为 Exponent 依赖 Segment 分析，答案是是的，
而且你必须在 Apple 提交表单上勾选几个选项，具体查看 Segement 文档: <a class="reference external" href="https://segment.com/docs/sources/mobile/ios/quickstart/#step-5-submitting-to-the-app-store">Segment's Guide</a></div></blockquote>
</div>
<div class="section" id="id4">
<h2>7. 应用更新<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>当你想更新应用的时候，只需要从 XDE 或者 <code class="docutils literal"><span class="pre">exp</span></code> publish 就可以了! 只要你不修改 <code class="docutils literal"><span class="pre">exp.json</span></code> 里的 <code class="docutils literal"><span class="pre">sdkVersion</span></code>, 你的 standalone app 就会在用户下次打开 app 的时候，升级到最新代码。
如果你想修改图标或者 app 名字的话，你必须重新提交 app 到每一个商店。</p>
<p>如果过程中遇到什么问题的话，我们非常荣幸可以帮助你!
加入我们的 Slack, 随时问我们问题。
If you run into problems during this process, we're more than happy to help out!</p>
<blockquote class="epigraph">
<div><p><strong>Note:</strong> 好奇为什么这样子可以? 我们在 app 里内嵌了一个 Exponent 运行时，而且让它永远指向你的 app 的 published URL。</p>
<p>我们在这里提到了一些必须属性, 但是你可以配置更多属性，比如推送通知图标，deep-linking url scheme (参考: <span class="xref std std-ref">the guide on exp.json</span>), 我们负责 build, 所以你完全不需要打开 Xcode 或者 Android Studio。</p>
</div></blockquote>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-link" href="exp-cli.html" title="previous chapter (use the left arrow)">&laquo; <code class="docutils literal"><span class="pre">exp</span></code> 命令行接口</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-link" href="how-exponent-works.html" title="next chapter (use the right arrow)">Exponent 是怎么工作的 &raquo;</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="how-exponent-works.html" title="Exponent 是怎么工作的"
             >next</a> |</li>
        <li class="right" >
          <a href="exp-cli.html" title="exp 命令行接口"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Exponent unversioned documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Guides</a> &raquo;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../../../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2016, Exponent. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>